<html>
  <head>
    <meta charset="utf-8">
    <!--
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.1.3/css/bootstrap.min.css">
    
    <link rel="stylesheet" href="https://cdn.form.io/formiojs/formio.full.min.css">
    <script src="https://cdn.form.io/formiojs/formio.full.min.js"></script>
    <script type="text/javascript">
      var objBuilder = null;
      var objForm = null;

      window.onload = function() {
        Formio.icons = 'fontawesome';

        Formio.builder(document.getElementById('builder'), {}, {
            builder: {
                workorder: {
                    title: 'WO Fields',
                    weight: 0,
                    default: true,
                    components: {
                        wonum: {
                            title: 'WONUM',
                            key: 'wonum',
                            icon: 'terminal',
                            schema: {
                                label: 'WONUM',
                                type: 'textfield',
                                key: 'wonum',
                                input: true,
                                disabled: false
                            }
                        },
                        description: {
                            title: 'Description',
                            key: 'description',
                            icon: 'terminal',
                            schema: {
                              label: 'Description',
                              type: 'textfield',
                              key: 'description',
                              input: true
                            }
                        },
                        status: {
                          title: 'Status',
                          key: 'status',
                          schema: {
                            label: "Status",
                            widget: "choicesjs",
                            tableView: true,
                            data: {
                              values: [
                                {
                                  label: "New",
                                  value: "New"
                                },
                                {
                                  label: "WAPPR",
                                  value: "WAPPR"
                                },
                                {
                                  label: "APPR",
                                  value: "APPR"
                                },
                                {
                                  label: "SENTTOVENDOR",
                                  value: "SENTTOVENDOR"
                                },
                                {
                                  label: "VENDORCONFIRMED",
                                  value: "VENDORCONFIRMED"
                                },
                                {
                                  label: "READYFORVENDOR",
                                  value: "READYFORVENDOR"
                                },
                                {
                                  label: "COMP",
                                  value: "COMP"
                                }
                              ]
                            },
                            key: "status",
                            type: "select",
                            input: true,
                            defaultValue: "New"
                          }
                        },
                        location: {
                          title: 'Location',
                          key: 'location',
                          schema: {
                            label: "Location",
                            widget: "choicesjs",
                            tableView: true,
                            dataSrc: "url",
                            data: {
                              url: "http://124.222.21.115:3000/api/locations/?token=a32dd92e852b21f9bf794a8e26a9dcf69924ca9c50e3b1bb704cf57a29b6fe540cb84377c5847bb85a041724793e5b06883b96fe8e55713e&client_id=29",
                              headers: [
                                {
                                  key: "",
                                  value: ""
                                }
                              ]
                            },
                            valueProperty: "code",
                            template: "<span>{{ item.description }}</span>",
                            key: "location",
                            type: "select",
                            disableLimit: false,
                            input: true
                          }
                        },
                        asset: {
                          title: 'Asset',
                          key: 'asset',
                          schema: {
                            label: "Asset",
                            widget: "choicesjs",
                            tableView: true,
                            dataSrc: "url",
                            data: {
                              url: "http://124.222.21.115:3000/api/locations/?token=a32dd92e852b21f9bf794a8e26a9dcf69924ca9c50e3b1bb704cf57a29b6fe540cb84377c5847bb85a041724793e5b06883b96fe8e55713e&client_id=29",
                              headers: [
                                {
                                  key: "",
                                  value: ""
                                }
                              ]
                            },
                            valueProperty: "code",
                            template: "<span>{{ item.description }}</span>",
                            key: "asset",
                            type: "select",
                            input: true
                          }
                        },
                        active: {
                          title: 'Active',
                          key: 'active',
                          schema: {
                            label: "Active",
                            widget: "choicesjs",
                            tableView: true,
                            data: {
                              values: [
                                {
                                  label: "active",
                                  value: "1"
                                },
                                {
                                  label: "inactive",
                                  value: "0"
                                }
                              ]
                            },
                            key: "active",
                            type: "select",
                            input: true,
                            defaultValue: "1"
                          }
                        }
                    }
                }, // workorder
                request: {
                    title: 'Request Fields',
                    weight: 0,
                    components: {
                        status: {
                          title: 'Status',
                          key: 'status',
                          schema: {
                            label: "Status",
                            widget: "choicesjs",
                            tableView: true,
                            data: {
                              values: [
                                {
                                  label: "New",
                                  value: "new"
                                },
                                {
                                  label: "Pending",
                                  value: "pending"
                                },
                                {
                                  label: "Unassigned",
                                  value: "unassigned"
                                },
                                {
                                  label: "Assigned",
                                  value: "assigned"
                                },
                                {
                                  label: "Inprogress",
                                  value: "inprogress"
                                },
                                {
                                  label: "Declined",
                                  value: "declined"
                                },
                                {
                                  label: "Completed",
                                  value: "completed"
                                }
                              ]
                            },
                            key: "status",
                            type: "select",
                            input: true,
                            defaultValue: "New"
                          }
                        },
                        active: {
                          title: 'Active',
                          key: 'active',
                          schema: {
                            label: "Active",
                            widget: "choicesjs",
                            tableView: true,
                            data: {
                              values: [
                                {
                                  label: "active",
                                  value: "1"
                                },
                                {
                                  label: "inactive",
                                  value: "0"
                                }
                              ]
                            },
                            key: "active",
                            type: "select",
                            input: true,
                            defaultValue: "1"
                          }
                        }
                    }
                }, // request
                basic: {
                  title: 'Basic',
                  weight: 100,
                  default: false
                },
                advanced: {
                  title: 'Advanced',
                  weight: 110
                },
                layout: {
                  title: 'Layout',
                  weight: 120
                },
                data: {
                  title: 'Data',
                  weight: 130
                },
                premium: {
                  title: 'Premium',
                  weight: 140
                }
            }
        }).then((builder) => {
          // Here is the form builder instance.
          // console.log(builder.form);
          objBuilder = builder;
          objForm = builder.form;
        });
      };

      function test() {
        console.log(objForm);
        console.log(objForm.components);
        console.log(JSON.stringify(objForm.components));
      }
    </script>
  </head>
  <body>
    <div><button onclick="test()">Test</button></div>
    <div id="builder"></div>
  </body>
</html>
